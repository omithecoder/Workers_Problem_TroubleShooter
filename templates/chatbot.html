<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<title>Home page</title>
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
			rel="stylesheet"
			integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
			crossorigin="anonymous"
		/>
		<link rel="stylesheet" href="static/CSS/chatbot.css" />
		<link
			rel="stylesheet"
			href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
		/>
	</head>
	<body>
		<section style="height: 100vh" id="mainBody">
			<div
				id="leftBody"
				class="d-flex flex-column flex-shrink-0 p-3 text-bg-dark"
				style="width: 280px; height: 100%"
			>
				<a
					href="/"
					class="d-flex align-items-center mb-3 mb-md-0 me-md-auto text-white text-decoration-none"
				>
					<svg class="bi pe-none me-2" width="40" height="32">
						<use xlink:href="#bootstrap"></use>
					</svg>
					<span class="fs-4">
						<img
							src="static/Images/indexPage/logo.jpg"
							height="50px"
							width="50px"
							style="border-radius: 100%"
						/>
						WorkerHelp</span
					>
				</a>
				<hr />
				<ul class="nav nav-pills flex-column mb-auto">
					<li class="nav-item">
						<a href="/" class="nav-link text-white" aria-current="page">
							<i class="bi bi-house-door-fill"></i>
							Home
						</a>
					</li>
					<li>
						<a href="#" class="nav-link text-white">
							<i class="bi bi-speedometer"></i>
							Dashboard
						</a>
					</li>
					<li>
						<a href="/chatbot" class="nav-link active">
							<i class="bi bi-bug-fill"></i>
							TroubleShoot
						</a>
					</li>
					<li>
						<a href="#" class="nav-link text-white">
							<i class="bi bi-tools"></i>
							Tools Info
						</a>
					</li>
					<li>
						<a href="#" class="nav-link text-white">
							<i class="bi bi-telephone-fill"></i>
							Contact
						</a>
					</li>
				</ul>
				<hr />
				<div class="dropdown">
					<a
						href="#"
						class="d-flex align-items-center text-white text-decoration-none dropdown-toggle"
						data-bs-toggle="dropdown"
						aria-expanded="false"
					>
						<img
							src="https://github.com/mdo.png"
							alt=""
							width="32"
							height="32"
							class="rounded-circle me-2"
						/>
						<strong>mdo</strong>
					</a>
					<ul class="dropdown-menu dropdown-menu-dark text-small shadow">
						<li><a class="dropdown-item" href="#">New project...</a></li>
						<li><a class="dropdown-item" href="#">Settings</a></li>
						<li><a class="dropdown-item" href="#">Profile</a></li>
						<li><hr class="dropdown-divider" /></li>
						<li><a class="dropdown-item" href="#">Sign out</a></li>
					</ul>
				</div>
			</div>

			<!--  -->
			<div id="rightBody">
				<nav class="navbar bg-dark flex-row">
					<div
						class="container-fluid"
						style="
							display: flex;
							justify-content: space-between;
							align-items: center;
						"
					>
						<div style="display: flex">
							<img
								src="static/Images/chatbotPage/logo.gif"
								alt=""
								width="135"
								height="100"
								class="d-inline-block align-text-top"
							/>
							<a
								class="navbar-brand"
								style="
									display: flex;
									justify-content: center;
									align-items: center;
									color: white;
									font-size: 2rem;
									text-align: center;
								"
								href="#"
							>
								TroubleShooter
							</a>
						</div>
						<div
							style="
								display: flex;
								justify-content: center;
								align-items: center;
								gap: 30px;
								margin: 1rem;
							"
						>
							<svg
								xmlns="http://www.w3.org/2000/svg"
								width="32"
								height="32"
								fill="white"
								class="bi bi-file-earmark-arrow-up-fill"
								viewBox="0 0 16 16"
							>
								<path
									d="M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0M9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1M6.354 9.854a.5.5 0 0 1-.708-.708l2-2a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 8.707V12.5a.5.5 0 0 1-1 0V8.707z"
								/>
							</svg>
							<svg
								xmlns="http://www.w3.org/2000/svg"
								width="32"
								height="32"
								fill="white"
								class="bi bi-person-lines-fill"
								viewBox="0 0 16 16"
							>
								<path
									d="M6 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6m-5 6s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1zM11 3.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 1-.5-.5m.5 2.5a.5.5 0 0 0 0 1h4a.5.5 0 0 0 0-1zm2 3a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1zm0 3a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1z"
								/>
							</svg>
						</div>
					</div>
				</nav>


				<div id="chatBox" class="container" style="display: flex; justify-content: center;align-items: center;">
                    <img src="static\Images\chatbotPage\chatbot.gif" alt="chatbot-gif" height="500px" width="600px" id="chatbotImg">
					<input type="text" id="userMsg" value="{{user_message}}" style="display:none">
					<input type="text" id="response" value="{{response}}" style="display:none">
					<div class='container' id="chatArea" style="display:none;"></div>


                </div>
                <div id="chatInput" class="container">
                    <div >
                        <form action="/response" method="post" class="input-group mb-3">
                        <input type="text" class="form-control" name="user_message" placeholder="Type your message here" aria-label="Recipient's username" aria-describedby="button-addon2">
							<input type="text" id="botStatus" style="display:none" value="{{botStatus}}">

                            
                            



                        <button class="btn btn-outline-secondary" type="submit" id="button-addon2"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="green" class="bi bi-send-fill" viewBox="0 0 16 16">
                            <path d="M15.964.686a.5.5 0 0 0-.65-.65L.767 5.855H.766l-.452.18a.5.5 0 0 0-.082.887l.41.26.001.002 4.995 3.178 3.178 4.995.002.002.26.41a.5.5 0 0 0 .886-.083zm-1.833 1.89L6.637 10.07l-.215-.338a.5.5 0 0 0-.154-.154l-.338-.215 7.494-7.494 1.178-.471z"/>
                          </svg></button>
                          </form>
                    </div>
			</div>
		</section>
		<script
			src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
			integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
			crossorigin="anonymous"
		></script>
        <script>
    var chatbotImg = document.getElementById("chatbotImg");
    var botStatus = document.getElementById("botStatus").value;
    var chatArea = document.getElementById("chatArea");

    if(botStatus == "1") {
        chatbotImg.style.display = "none";
        chatArea.style.display = "block";
        chatArea.style.border = "1px solid black";
        chatArea.style.height = "500px";
        chatArea.style.overflow = "auto";

        // Function to append messages to the chat area
        function appendMessage(message, className) {
            var messageDiv = document.createElement("p");
            messageDiv.className = className;
            messageDiv.innerHTML = message;
            chatArea.appendChild(messageDiv);
            chatArea.scrollTop = chatArea.scrollHeight; // Scroll to the bottom
        }

        // Append user message
        var userMsg = document.getElementById("userMsg").value;
        if (userMsg.trim() !== "") {
            appendMessage(userMsg, "user-message");
        }

        // Append bot response
        var response = document.getElementById("response").value;
        if (response.trim() !== "") {
            appendMessage(response, "bot-message");
        }
    } else {
        chatbotImg.style.display = "block";
    }
</script>

	</body>
</html>
